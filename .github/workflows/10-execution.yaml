name: 10 Controlling the execution flow
on:
  workflow_dispatch:
jobs:
  lint-build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      - name: Run linting
        run: echo "Running linting..."
  unit-tests:
    runs-on: ubuntu-latest
    needs: lint-build
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      - name: Run unit tests
        run: echo "Running unit tests..."
      - name: Failing Unit Tests
        if: ${{ !inputs.pass-unit-tests }}
        run: exit 1
  deploy-nonprod:
    runs-on: ubuntu-latest
    needs:
      - unit-tests
      - lint-build
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      - name: Deploy to Non-Prod
        run: echo "Deploying to non-production environment..."
  e2e-tests:
    runs-on: ubuntu-latest
    needs: deploy-nonprod
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      - name: Run E2E tests
        run: echo "Running end-to-end tests..."
  deploy-prod:
    runs-on: ubuntu-latest
    needs:
      - e2e-tests
      - unit-tests
      - deploy-nonprod
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      - name: Deploy to Prod
        run: echo "Deploying to production environment..."
